!function(e,t){"use strict";var r=e.jQuery;if("function"==typeof define&&define.amd)r?define([],t.bind(null,r)):define(["jquery"],t);else if("object"==typeof exports)module.exports=t(r?r:require("jquery"));else{if(!r)throw"Missing required jQuery dependency";e.setIframeHeight=t(r)}}(this,function(e){"use strict";function t(t){var r=null;return e("iframe").each(function(n,a){var f=e(a).attr("data-iframeAutoHeight-currentSrc")||a.src;if(f&&(f=i(f))===t)return r=a,!1}),r}function r(t){var r=null;return e("iframe").each(function(i,n){if(e(n).data("setIframeHeight_id")===t)return r=n,!1}),r}function i(e){return 0===e.indexOf("/")&&(e=n(document.location.href)+e),e}function n(e){return(e.match(/https?:\/\/.[^/]+/)||[])[0]}function a(e){return e.replace(/^https?:\/\//,"//")}e(window).bind("setIframeHeight",function(n,f){var o;if((o=r(f.iframeId))||(o=t(f.iframeSrc)),!o&&f.iframeReferrer&&(o=t(f.iframeReferrer)),o){var c=e(o),h=e(window);c.data("setIframeHeight_id",f.iframeId),c.height(f.height);var g=a(c.attr("data-iframeAutoHeight-currentSrc")||o.src)!==a(f.iframeSrc);c.attr("data-iframeAutoHeight-currentSrc",f.iframeSrc);var s=d[f.iframeId],u=f.height;if(void 0===s?h.trigger("setIframeHeight:determined",f):s>u?h.trigger("setIframeHeight:shrinked",f):s<u&&e(window).trigger("setIframeHeight:enlarged",f),d[f.iframeId]=u,window.history.replaceState&&c.attr("data-iframeAutoHeight-deepLinkPattern")&&g){var m=i(c.attr("data-iframeAutoHeight-deepLinkPattern").replace(/%deepLinkIframeSrc%/,encodeURIComponent(f.iframeSrc)));a(document.location.href)!==a(m)&&(window.history.replaceState({},"",m),e(window).trigger("setIframeHeight:deepLink:changed",{childUrl:f.iframeSrc,parentUrl:m})),o.contentWindow&&o.contentWindow.postMessage&&o.contentWindow.postMessage('setIframeHeight:deepLink:changed::{ "parentUrl": "'+m+'", "childUrl": "'+f.iframeSrc+'"}',"*")}}}).bind("message",function(t){var r=t.originalEvent.data;if("string"==typeof r&&r.indexOf("::")&&2===(r=r.split("::")).length&&"setIframeHeight"===r[0]){var i=e.parseJSON(r[1]);f.setHeight(i)}});var f={setHeight:function(t){t.height=parseInt(t.height,10),e(window).trigger("setIframeHeight",[t])}},d={};return f});